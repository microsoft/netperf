name: Custom Tasks

on:
  workflow_dispatch:
    inputs:
      os:
        description: 'Windows OS Version'
        required: false
        default: "2022"
        type: choice
        options:
          - "2025"
          - "2022"
          - "2019"

permissions: write-all

jobs:
#
# Cleanup temporary VMs
#
cleanup-azure-vms:
  name: Cleanup temporary Azure VMs
  needs: [run-secnetperf]
  uses: microsoft/netperf/.github/workflows/cleanup-azure-vms.yml@create-azure-machines
  with:
    tag: 'azure-temp'
    vmname1: 'windows-tmp-1'
    vmname2: 'windows-tmp-2'
  secrets:
    AZURE_CLIENT_ID: ${{ secrets.AZURE_CLIENT_ID }}
    AZURE_TENANT_ID: ${{ secrets.AZURE_TENANT_ID }}
    AZURE_SUBSCRIPTION_ID: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
    PERSONAL_ACCESS_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}
